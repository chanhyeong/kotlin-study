# 2. 의사소통과 언어 사용
도메인 모델 - 소프트웨어 프로젝트를 위한 공통 언어의 핵심  
모델 - 프로젝트에 참여한 사람들의 머릿속에 축적된 개념을 모아 놓은 것, 도메인에 대한 통찰력을 반영하는 용어와 관계로 표현

모델 기반 의사소통은 UML 상의 다이어그램으로만 한정되면 안됨  
모델을 가장 효과적으로 사용하려면 모든 의사소통 수단에 스며들어야 함

## UBIQUITOUS LANGUAGE (보편 언어)
유연하고 풍부한 지식이 담긴 설계를 만들려면 - 팀의 공유 언어와 그 언어에 대한 활발한 실험이 필요

- 도메인 전문가 - 소프트웨어 개발에 사용되는 기술적인 전문 용어 이해의 한계, 분야 전문 용어는 다양
- 개발자 - 시스템을 서술적이고 기능적 용어로 이해하고 토론, 전문가들의 언어에 담긴 의미는 알지 못함
- 개발자는 설계는 뒷받침하지만 도메인 전문가는 이해할 수 없는 방식으로 추상화할 수도 있음

언어적으로 어긋나있지만
1. 도메인 전문가는 원하는 바를 모호하게 서술
2. 생소한 도메인을 이해하려는 개발자가 이해하는 바도 모호한 수준
3. 팀의 일부만이 도메인 전문가 - 개발자가 사용하는 언어를 모두 소화하지만 -> 정보 흐름의 병목, 번역하는 바도 명확하지 않음

=> 공통 언어가 없는 프로젝트에서는 개발자가 도메인 전문가를 위해 자신들의 언어를 번역해줘야 함  
=> 도메인 전문가도 개발자 간의, 다른 도메인 전문가 간의 언어를 번역해줘야 함  
=> 개발자들 끼리도 서로 번역

프로젝트에서 사용하는 언어가 분열되면 심각한 문제가 발생한다
1. 도메인 전문가는 자신의 전문 용어만 사용
2. 기술적인 업무를 맡은 팀원은 설계 측면에서 도메인에 관한 토론에 적합한 자신들만의 언어를 사용
3. 일상적인 토론에서 쓰이는 용어가 코드에 녹아든 용어와 단절
4. 같은 사람인데도 말할 때나 글을 쓸 때 서로 다른 용어를 써서, 간결한 표현이 일시적으로 나타났다가 코드나 문서에 담기지 않음
5. 번역은 의사소통을 무디게 하고 지식 탐구를 빈약하게 만듦
6. 일부 사람들만 쓰는 언어는 모두의 필요를 충족하지 못하므로 공통 언어가 될 수 없음

**UBIQUITOUS LANGUAGE** 를 구성하는 어휘에는 **클래스와 주요 연산의 이름이 있음**  
LANGUAGE 에는 모델 내에서 명시적으로 드러나는 규칙을 토론하기 위한 용어가 포함 (14장의 CONTEXT MAP과 대규모 구조 등)  
팀에서 일반적으로 도메인 모델에 적용하는 패턴의 이름으로 풍부해짐

#### 모델의 관계는 모든 언어에 내재된 결합 규칙이 된다  
단어와 구절의 의미는 모델을 구성하는 개별 요소의 의미를 각각 반영

#### 모델 기반 언어는 개발자 사이에서 업무와 기능을 기술할 때도 사용해야 한다  
개발자와 도메인 전문가가 서로 의사소통 + 도메인 전문가들이 서로 요구사항, 개발 계획, 기능에 관해 의사소통하는 데도 언어를 제공

#### 초기 모델은 역할을 못함
- 해당 분야의 전문 용어에 대한 의미적 풍부함이 결여되어 있을 수 있음
- 모호함과 모순이 있어 그대로 사용은 못함
- 개발자가 코드에 구현한 어렵고 실제적인 내용이 빠져있을 수 있음
  - 개발자가 전문 용어를 모델의 요소로 여기지 않았거나, 코딩 스타일이 절차적이고 도메인의 개념을 불분명하게 전달하는데 그치기 때문

#### 지식 탐구 과정은 모델 기반 언어에 팀 전체가 헌신할 때 가능  
UBIQUITOUS LANGUAGE 를 지속적으로 사용하다보면 모델의 취약점이 드러남  
실험을 토대로 부자연스러운 용어나 결합의 대안을 찾아낼 것  
언어 공백이 발견되면 토론 과정에서 새로운 단어가 나타날 것  
=> **이런 변화는 도메인 모델의 변화로 인식**, 용어의 의미가 바뀌면 팀에서는 클래스 다이어그램을 수정하고 클래스/메소드명 변경 + 동작 방식도 바꿈

#### 도메인 전문가는 폭넓은 맥락을 설명하기 위해 UBIQUITOUS LANGUAGE 범위를 넘어서서 말할 수 있음
- 모델이 다루는 범위 안에선 LANGUAGE 를 사용해야 함

### 정리
- 모델을 언어의 근간으로 사용하라
- 팀 내의 모든 의사소통과 코드에서 해당 언어를 끊임없이 적용
- 다이어그램과 문서 + 말할 때 동일한 언어 사용
- 대만 모델을 반영하는 대안이 되는 표현을 시도하여 어려움 해소 (???)
- 새로운 모델에 맞게 끔 클래스, 메소드, 모듈 명을 다시 지으면서 코드 리팩토링
- 일상적으로 쓰는 단어의 의미에 동의를 이끌어는 방식으로 대화할 때 쓰는 용어의 혼란을 해결하라
- **UBIQUITOUS LANGUAGE 변화 = 모델의 변화**
- 도메인 전문가: 도메인을 이해하는 데 부자연스럽고 부정확한 용어나 구조에 대해 반대 의사를 표명
- 개발자: 설계를 어렵게 만드는 모호함과 불일치를 찾아내야 함

UBIQUITOUS LANGUAGE, 모델은 단순히 설계 산출물이 아님  
LANGUAGE 는 동적인 형태로 지식 전달 + 활용한 논의는 다이어그램과 코드 이면에 존재하는 의미에 활기

### 개인적인 결론
- 기획/디자인과 개발이 사용하는 단어를 맞추자
- 근데 이게 될까

## 크게 소리내어 모델링하기
다이어그램을 그리기 보단 말하자

도메인 모델에 사용된 UBIQUITOUS LANGUAGE 를 논의할 때 사용하면  
해당 언어를 더욱 유창하게 구사하고, 서로에게 해당 언어의 미묘한 차이까지 가르칠 수 있음  
자연스럽게 다이어그램, 문서만으로는 일어날 수 없는 방식으로 공유

- 시스템에 관해 이야기를 주고 받을 때 모델을 사용하라
- 모델의 요소와 상호작용을 이용하고 모델이 허용하는 범위에 개념을 조합하면서 시나리오를 소리내어 말하라
- 표현해야 할 것을 더 쉽게 말하는 방법을 찾아낸 다음, 나온 새로운 아이디어를 다이어그램과 코드에 적용하라

## 한 팀, 한 언어
> "업무 전문가들에게는 너무 추상적"  
> "업무 전문가들은 객체를 이해하지 못함"  
> "업무 전문가들이 쓰는 용어로 된 요구사항을 만들어야 함"

이런 식으로 팀에 2가지 언어가 존재하게 됨  
**수준 높은 도메인 전문가도 해당 모델을 이해하지 못한다면 모델이 뭔가 잘못된거다**

#### 사용자가 아직 모델링되지 않은 시스템 특성을 논의하는 초기 단계
사용할 모델이 존재하지 않음  
사용자 - 개발자가 같이 새로운 아이디어를 검토하면서 공유할 모델을 찾는 과정이 시작됨 -> 점차 정제  
새로운 언어가 발전하면서 도메인 전문가는 해당 언어를 채택하고 중요한 기존 문서를 개정을 잘 해나가야 함

이 언어를 사용하면 모델에서 요건에 적합하지 않거나 잘못된 부분을 금방 발견  
도메인 전문가는 (+ 개발자 도움) 모델 기반 언어의 정밀함을 토대로 도메인 전문가가 생각하는 바 중에서 모순되거나 모호한 부분도 알게 될 것

시나리오를 토대로 모델 객체를 사용해보면서 모델을 시험해볼 수 있음 -> 서로의 개념 이해와 정제가 깊어짐

도메인 전문가는 모델의 언어를 기반으로 use case 작성 -> acceptance test 를 구체화하여 모델을 직접적으로 다룸

도메인 전문가와 개발자 사이에 언어적 분열이 일어나선 안된다 (12장 - 모델의 무결성 유지)

![image](https://comment-it.co.uk/wp-content/uploads/2018/01/ubiquitous-language.png)

UBIQUITOUS LANGUAGE 가 마련되면 개발자 간의 대화, 도메인 전문가 간의 논의, 코드 자체에 포함된 표현까지  
모두 공유된 도메인 모델에서 비롯된 동일한 언어를 기반으로 함

## 문서와 다이어그램
#### UML 만으로는 안되는 이유
UML 을 통해서만 전체 모델이나 설계를 전달하면 **지나치게 완전 + 많은 부분이 생략**  
완전? -> 코딩할 것들을 모조리 툴에 집어넣어버리면서 생김

속성과 관계는 객체 모델의 반 정도를 차지할 뿐, 객체의 행위(behavior)와 제약조건(constraint)은 그리기 어려움  
assertion 까지 포함하려면 텍스트를 작은 괄호로 감싸서 다이어그램에 집어넣는 수밖에

객체의 행위적 책임은 이름으로 표현, 상호작용은 다이어그램으로 암묵적으로 보여줄 수는 있지만 설명은 못함  
이를 설명하는 것은 텍스트 or 대화  
=> UML 은 가장 중요한 모델이 나타내는 개념의 의미 + 모델 객체의 행위를 전달하지 못함

##### 다이어그램은 의사소통과 설명의 수단, 브레인스토밍을 촉진
하지만 이는 단순할 때

전체 객체 모델을 포괄하는건 의사소통이나 설명이라는 목적을 달성하지 못함 (너무 세부적이어서)

#### 설계의 생생한 세부사항은 코드에 담긴다
잘 작성된 구현은 투명해서, 설계를 지탱하는 모델을 드러내야 한다  
보조적인 역할을 수행하는 다이어그램과 문서를 이용해 핵심에 파악할 수 있음  
자연어로 하는 논의는 의미의 미묘한 차이를 채워줄 수 있음

#### 모델은 다이어그램이 아니다
다이어그램의 목적은 모델을 전달하고 설명하는 데 있고  
코드는 설계의 세부사항에 대한 저장소 역할  
잘 작성된 자바 코드는 UML 만큼 표현력이 있다

### 글로 쓴 설계 문서
